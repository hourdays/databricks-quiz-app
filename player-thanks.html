<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thank You - Quiz App</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Thank You for Playing!</h1>
            <div class="welcome-message">
                <h2>Great job, <span id="playerName"></span>! üëè</h2>
            </div>
        </div>

        <div class="result-card">
            <h3>Thanks for participating!</h3>
            <p>Your answer has been recorded. The admin will show the final leaderboard shortly.</p>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const playerNameSpan = document.getElementById('playerName');

        // Extract display name from email
        function extractDisplayName(email) {
            if (!email || email === 'Anonymous') return 'Anonymous';
            const beforeAt = email.split('@')[0];
            const beforeFirstDot = beforeAt.split('.')[0];
            return beforeFirstDot.charAt(0).toUpperCase() + beforeFirstDot.slice(1);
        }

        // Handle player game ended (no longer need to display results)
        socket.on('player-game-ended', (data) => {
            console.log('Player game ended:', data);
            // Just acknowledge, no display needed
        });

        // Handle game reset
        socket.on('game-reset', () => {
            localStorage.clear();
            window.location.href = 'index.html';
        });

        // Set up welcome message
        window.addEventListener('load', () => {
            const playerEmail = localStorage.getItem('playerEmail');
            if (playerEmail) {
                const displayName = extractDisplayName(playerEmail);
                playerNameSpan.textContent = displayName;
            }
        });
    </script>
</body>
</html>
